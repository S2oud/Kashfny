(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{4819:(e,r,t)=>{Promise.resolve().then(t.bind(t,2805))},6937:(e,r,t)=>{"use strict";var s=t(261);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},2805:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var s=t(2860),a=t(3200),n=t(6937),l=t(2420),o=t(7001),i=t(3243);let c=e=>Math.abs(e)>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString();function d(e){let{players:r}=e,[t,n]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 transition-all duration-300 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"النقاط الحالية:"}),(0,s.jsx)("button",{onClick:()=>n(!t),className:"text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":t?"توسيع":"طي",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-transform ".concat(t?"rotate-180":""),children:(0,s.jsx)("path",{d:"m18 15-6-6-6 6"})})})]}),(0,s.jsx)("div",{className:"space-y-1 overflow-hidden transition-all duration-300 ".concat(t?"max-h-0 opacity-0":"max-h-96 opacity-100"),children:r.map((e,r)=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 last:border-0",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,s.jsx)("span",{className:"font-bold text-sm ".concat(e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-600"),children:c(e.score)})]},r))})]})}let m=e=>{let r=Number(e)||0;return Math.abs(r)>=1e3?"".concat((r/1e3).toFixed(0),"K"):r.toString()};function u(e){let{playerName:r,value:t,onChange:n,index:l}=e,[o,i]=(0,a.useState)("5000"),[c,d]=(0,a.useState)(m(t));return(0,a.useEffect)(()=>{let e=localStorage.getItem("incrementAmount");e&&i(e)},[]),(0,a.useEffect)(()=>{d(m(t))},[t]),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsxs)("label",{htmlFor:"player-".concat(l),className:"w-1/3 text-sm font-medium text-gray-700",children:[r,":"]}),(0,s.jsxs)("div",{className:"w-2/3 flex items-center space-x-1 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{n(String((Number(t)||0)-(Number(o)||5e3)))},className:"px-2 py-1 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-red-50 hover:bg-red-100 text-red-600",type:"button",children:"-"}),(0,s.jsx)("input",{type:"text",id:"player-".concat(l),value:c,onChange:e=>{let r=e.target.value;(r.endsWith("K")||r.endsWith("k"))&&(r=String(1e3*Number(r.slice(0,-1)))),n(r)},className:"w-20 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-center text-sm ".concat((()=>{let e=Number(t)||0;return e>0?"bg-green-50":e<0?"bg-red-50":"bg-white"})()),placeholder:"0"}),(0,s.jsx)("button",{onClick:()=>{n(String((Number(t)||0)+(Number(o)||5e3)))},className:"px-2 py-1 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-green-50 hover:bg-green-100 text-green-600",type:"button",children:"+"})]})]})}function x(e){let{gameData:r}=e;return 0===r.rounds.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"لا توجد جولات مسجلة بعد"}):(0,s.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,s.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"سجل الجولات:"}),(0,s.jsx)("div",{className:"space-y-4",children:r.rounds.slice().reverse().map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["الجولة ",e.id]}),(0,s.jsx)("div",{className:"space-y-1",children:e.scores.map(e=>{if(0===e.points)return null;let t=r.players[e.playerId];return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:t.name}),(0,s.jsx)("span",{className:"font-medium ".concat(e.points>0?"text-green-600":"text-red-600"),children:e.points>0?"+".concat(e.points):e.points})]},e.playerId)})})]},e.id))})]})}var h=t(6173);function p(){let e=(0,n.useRouter)(),[r,t]=(0,a.useState)(!1),{gameData:c,isLoading:m,addRound:p,resetGame:g,endGame:y}=(0,h.v)(),[f,b]=(0,a.useState)({}),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)("scores");(0,a.useEffect)(()=>{t(!0),m||c||e.push("/")},[m,c,e]);let S=(e,r)=>{b({...f,[e]:r})};return r&&!m&&c?(0,s.jsx)("main",{className:"flex min-h-screen flex-col p-4 md:p-8",children:(0,s.jsxs)(o.A,{className:"bg-gradient-to-br from-white to-gray-50 shadow-lg",children:[(0,s.jsx)(l.A,{title:"كاشفني / داقشني",subtitle:"الجولة ".concat(c.rounds.length+1)}),(0,s.jsxs)("div",{className:"flex border-b border-gray-200 mb-4",children:[(0,s.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("scores"===N?"border-b-2 border-primary text-primary font-bold":"text-gray-500"),onClick:()=>w("scores"),children:"النقاط"}),(0,s.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("history"===N?"border-b-2 border-primary text-primary font-bold":"text-gray-500"),onClick:()=>w("history"),children:"السجل"})]}),"scores"===N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(d,{players:c.players}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"إضافة نقاط الجولة:"}),(0,s.jsx)("div",{className:"space-y-3 bg-white p-3 rounded-md shadow-sm",children:c.players.map((e,r)=>(0,s.jsx)(u,{playerName:e.name,value:f[r]||"",onChange:e=>S(r,e),index:r},r))}),v&&(0,s.jsx)("div",{className:"text-red-500 text-sm mt-2",children:v}),(0,s.jsx)(i.A,{onClick:()=>{if(!c)return;let e=[],r=!1;if(c.players.forEach((t,s)=>{let a=f[s]?parseInt(f[s]):0;0!==a&&(r=!0),e.push({playerId:s,points:a})}),!r){j("الرجاء إدخال نقاط لاعب واحد على الأقل");return}p(e),b({}),j("")},variant:"primary",fullWidth:!0,className:"mt-4",children:"إضافة النقاط"})]})]}),"history"===N&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(x,{gameData:c})}),(0,s.jsxs)("div",{className:"pt-6 flex space-x-3 space-x-reverse",children:[(0,s.jsx)(i.A,{onClick:()=>{confirm("هل أنت متأكد من إعادة ضبط اللعبة؟ سيتم حذف جميع النقاط.")&&(g(),b({}))},variant:"secondary",className:"flex-1",children:"إعادة ضبط"}),(0,s.jsx)(i.A,{onClick:()=>{confirm("هل أنت متأكد من إنهاء اللعبة؟ سيتم العودة إلى الصفحة الرئيسية.")&&(y(),e.push("/"))},variant:"danger",className:"flex-1",children:"إنهاء اللعبة"})]})]})}):null}},3243:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(2860);t(3200);var a=t(4612),n=t.n(a);function l(e){let{children:r,onClick:t,href:a,variant:l="primary",fullWidth:o=!1,disabled:i=!1,type:c="button",className:d=""}=e,m="".concat("py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"border border-transparent text-white bg-primary hover:bg-primary/90 focus:ring-primary",secondary:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary",danger:"border border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"}[l]," ").concat(o?"w-full":""," ").concat(d);return a?(0,s.jsx)(n(),{href:a,className:m,children:r}):(0,s.jsx)("button",{type:c,onClick:t,disabled:i,className:m,children:r})}},7001:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(2860);function a(e){let{children:r,className:t=""}=e;return(0,s.jsx)("div",{className:"w-full max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl ".concat(t),children:(0,s.jsx)("div",{className:"p-6",children:r})})}t(3200)},2420:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(2860);t(3200);var a=t(4612),n=t.n(a);function l(e){let{title:r,subtitle:t,showBackButton:a=!1,backUrl:l="/"}=e;return(0,s.jsxs)("div",{className:"text-center mb-6 relative w-full",children:[a&&(0,s.jsx)(n(),{href:l,className:"absolute right-0 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m9 18 6-6-6-6"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-primary",children:r}),t&&(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:t})]})}},6173:(e,r,t)=>{"use strict";t.d(r,{v:()=>a});var s=t(3200);function a(){let[e,r]=(0,s.useState)(null),[t,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("gameData");if(e)try{r(JSON.parse(e))}catch(e){console.error("Error parsing game data:",e),r(null)}a(!1)},[]);let n=e=>{localStorage.setItem("gameData",JSON.stringify(e)),r(e)};return{gameData:e,isLoading:t,initializeGame:(e,t)=>{localStorage.removeItem("gameData");let s={initialAmount:e,players:t.map(r=>({name:r,score:e})),rounds:[],startDate:new Date().toISOString()};return localStorage.setItem("gameData",JSON.stringify(s)),r(s),s},addRound:r=>{if(!e)return null;let t={id:e.rounds.length+1,scores:r},s=e.players.map((e,t)=>{var s;let a=(null===(s=r.find(e=>e.playerId===t))||void 0===s?void 0:s.points)||0;return{...e,score:e.score+a}}),a={...e,players:s,rounds:[...e.rounds,t]};return n(a),a},resetGame:()=>{if(!e)return null;let r={...e,players:e.players.map(r=>({...r,score:e.initialAmount})),rounds:[]};return n(r),r},endGame:()=>{localStorage.removeItem("gameData"),r(null)}}}}},e=>{var r=r=>e(e.s=r);e.O(0,[612,685,411,358],()=>r(4819)),_N_E=e.O()}]);