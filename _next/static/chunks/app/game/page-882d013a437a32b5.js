(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{4819:(e,r,s)=>{Promise.resolve().then(s.bind(s,2805))},6937:(e,r,s)=>{"use strict";var t=s(261);s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}})},2805:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var t=s(2860),a=s(3200),n=s(6937),l=s(2420),c=s(7001),i=s(3243);function d(e){let{players:r}=e;return(0,t.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,t.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"النقاط الحالية:"}),(0,t.jsx)("div",{className:"space-y-2",children:r.map((e,r)=>(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-0",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsx)("span",{className:"font-bold ".concat(e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-600"),children:e.score})]},r))})]})}function o(e){let{playerName:r,value:s,onChange:a,index:n}=e;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("label",{htmlFor:"player-".concat(n),className:"w-1/2 text-sm font-medium text-gray-700",children:[r,":"]}),(0,t.jsx)("input",{type:"number",id:"player-".concat(n),value:s||"",onChange:e=>a(e.target.value),className:"w-1/2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"0"})]})}function m(e){let{gameData:r}=e;return 0===r.rounds.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"لا توجد جولات مسجلة بعد"}):(0,t.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,t.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"سجل الجولات:"}),(0,t.jsx)("div",{className:"space-y-4",children:r.rounds.slice().reverse().map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,t.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["الجولة ",e.id]}),(0,t.jsx)("div",{className:"space-y-1",children:e.scores.map(e=>{if(0===e.points)return null;let s=r.players[e.playerId];return(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:s.name}),(0,t.jsx)("span",{className:"font-medium ".concat(e.points>0?"text-green-600":"text-red-600"),children:e.points>0?"+".concat(e.points):e.points})]},e.playerId)})})]},e.id))})]})}var u=s(6173);function x(){let e=(0,n.useRouter)(),[r,s]=(0,a.useState)(!1),{gameData:x,isLoading:p,addRound:h,resetGame:y,endGame:f}=(0,u.v)(),[g,b]=(0,a.useState)({}),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)("scores");(0,a.useEffect)(()=>{s(!0),p||x||e.push("/")},[p,x,e]);let k=(e,r)=>{b({...g,[e]:r})};return r&&!p&&x?(0,t.jsx)("main",{className:"flex min-h-screen flex-col p-4 md:p-8",children:(0,t.jsxs)(c.A,{children:[(0,t.jsx)(l.A,{title:"كاشفني / داقشني",subtitle:"الجولة ".concat(x.rounds.length+1)}),(0,t.jsxs)("div",{className:"flex border-b border-gray-200 mb-4",children:[(0,t.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("scores"===N?"border-b-2 border-primary text-primary":"text-gray-500"),onClick:()=>w("scores"),children:"النقاط"}),(0,t.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("history"===N?"border-b-2 border-primary text-primary":"text-gray-500"),onClick:()=>w("history"),children:"السجل"})]}),"scores"===N&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(d,{players:x.players}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"إضافة نقاط الجولة:"}),(0,t.jsx)("div",{className:"space-y-3",children:x.players.map((e,r)=>(0,t.jsx)(o,{playerName:e.name,value:g[r]||"",onChange:e=>k(r,e),index:r},r))}),v&&(0,t.jsx)("div",{className:"text-red-500 text-sm mt-2",children:v}),(0,t.jsx)(i.A,{onClick:()=>{if(!x)return;let e=[],r=!1;if(x.players.forEach((s,t)=>{let a=g[t]?parseInt(g[t]):0;0!==a&&(r=!0),e.push({playerId:t,points:a})}),!r){j("الرجاء إدخال نقاط لاعب واحد على الأقل");return}h(e),b({}),j("")},variant:"primary",fullWidth:!0,className:"mt-4",children:"إضافة النقاط"})]})]}),"history"===N&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(m,{gameData:x})}),(0,t.jsxs)("div",{className:"pt-6 flex space-x-3 space-x-reverse",children:[(0,t.jsx)(i.A,{onClick:()=>{confirm("هل أنت متأكد من إعادة ضبط اللعبة؟ سيتم حذف جميع النقاط.")&&(y(),b({}))},variant:"secondary",className:"flex-1",children:"إعادة ضبط"}),(0,t.jsx)(i.A,{onClick:()=>{confirm("هل أنت متأكد من إنهاء اللعبة؟ سيتم العودة إلى الصفحة الرئيسية.")&&(f(),e.push("/"))},variant:"danger",className:"flex-1",children:"إنهاء اللعبة"})]})]})}):null}},3243:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(2860);s(3200);var a=s(4612),n=s.n(a);function l(e){let{children:r,onClick:s,href:a,variant:l="primary",fullWidth:c=!1,disabled:i=!1,type:d="button",className:o=""}=e,m="".concat("py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"border border-transparent text-white bg-primary hover:bg-primary/90 focus:ring-primary",secondary:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary",danger:"border border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"}[l]," ").concat(c?"w-full":""," ").concat(o);return a?(0,t.jsx)(n(),{href:a,className:m,children:r}):(0,t.jsx)("button",{type:d,onClick:s,disabled:i,className:m,children:r})}},7001:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});var t=s(2860);function a(e){let{children:r,className:s=""}=e;return(0,t.jsx)("div",{className:"w-full max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl ".concat(s),children:(0,t.jsx)("div",{className:"p-6",children:r})})}s(3200)},2420:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(2860);s(3200);var a=s(4612),n=s.n(a);function l(e){let{title:r,subtitle:s,showBackButton:a=!1,backUrl:l="/"}=e;return(0,t.jsxs)("div",{className:"text-center mb-6 relative",children:[a&&(0,t.jsx)(n(),{href:l,className:"absolute right-0 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"m9 18 6-6-6-6"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-primary",children:r}),s&&(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:s})]})}},6173:(e,r,s)=>{"use strict";s.d(r,{v:()=>a});var t=s(3200);function a(){let[e,r]=(0,t.useState)(null),[s,a]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=localStorage.getItem("gameData");if(e)try{r(JSON.parse(e))}catch(e){console.error("Error parsing game data:",e),r(null)}a(!1)},[]);let n=e=>{localStorage.setItem("gameData",JSON.stringify(e)),r(e)};return{gameData:e,isLoading:s,initializeGame:(e,r)=>{let s={initialAmount:e,players:r.map(e=>({name:e,score:0})),rounds:[],startDate:new Date().toISOString()};return n(s),s},addRound:r=>{if(!e)return null;let s={id:e.rounds.length+1,scores:r},t=e.players.map((e,s)=>{var t;let a=(null===(t=r.find(e=>e.playerId===s))||void 0===t?void 0:t.points)||0;return{...e,score:e.score+a}}),a={...e,players:t,rounds:[...e.rounds,s]};return n(a),a},resetGame:()=>{if(!e)return null;let r={...e,players:e.players.map(e=>({...e,score:0})),rounds:[]};return n(r),r},endGame:()=>{localStorage.removeItem("gameData"),r(null)}}}}},e=>{var r=r=>e(e.s=r);e.O(0,[612,685,411,358],()=>r(4819)),_N_E=e.O()}]);