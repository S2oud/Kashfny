(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{4071:(e,t,r)=>{Promise.resolve().then(r.bind(r,4938))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},4938:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),n=r(6046),l=r(8715),o=r(973),c=r(6911);let i=e=>Math.abs(e)>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString();function d(e){let{players:t}=e,[r,n]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 transition-all duration-300 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"النقاط الحالية:"}),(0,s.jsx)("button",{onClick:()=>n(!r),className:"text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":r?"توسيع":"طي",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-transform ".concat(r?"rotate-180":""),children:(0,s.jsx)("path",{d:"m18 15-6-6-6 6"})})})]}),(0,s.jsx)("div",{className:"space-y-1 overflow-hidden transition-all duration-300 ".concat(r?"max-h-0 opacity-0":"max-h-96 opacity-100"),children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 last:border-0",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,s.jsx)("span",{className:"font-bold text-sm ".concat(e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-600"),children:i(e.score)})]},t))})]})}let m=e=>{let t=Number(e)||0;return Math.abs(t)>=1e3?"".concat((t/1e3).toFixed(0),"K"):t.toString()};function u(e){let{playerName:t,value:r,onChange:n,index:l}=e,[o,c]=(0,a.useState)("5000"),[i,d]=(0,a.useState)(m(r));return(0,a.useEffect)(()=>{let e=localStorage.getItem("incrementAmount");e&&c(e)},[]),(0,a.useEffect)(()=>{d(m(r))},[r]),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsxs)("label",{htmlFor:"player-".concat(l),className:"w-1/3 text-sm font-medium text-gray-700",children:[t,":"]}),(0,s.jsxs)("div",{className:"w-2/3 flex items-center space-x-1 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{n(String((Number(r)||0)-(Number(o)||5e3)))},className:"px-2 py-1 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-red-50 hover:bg-red-100 text-red-600",type:"button",children:"-"}),(0,s.jsx)("input",{type:"text",id:"player-".concat(l),value:i,onChange:e=>{let t=e.target.value;(t.endsWith("K")||t.endsWith("k"))&&(t=String(1e3*Number(t.slice(0,-1)))),n(t)},className:"w-20 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary text-center text-sm ".concat((()=>{let e=Number(r)||0;return e>0?"bg-green-50":e<0?"bg-red-50":"bg-white"})()),placeholder:"0"}),(0,s.jsx)("button",{onClick:()=>{n(String((Number(r)||0)+(Number(o)||5e3)))},className:"px-2 py-1 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-green-50 hover:bg-green-100 text-green-600",type:"button",children:"+"})]})]})}function x(e){let{gameData:t}=e;return 0===t.rounds.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"لا توجد جولات مسجلة بعد"}):(0,s.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,s.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"سجل الجولات:"}),(0,s.jsx)("div",{className:"space-y-4",children:t.rounds.slice().reverse().map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["الجولة ",e.id]}),(0,s.jsx)("div",{className:"space-y-1",children:e.scores.map(e=>{if(0===e.points)return null;let r=t.players[e.playerId];return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:r.name}),(0,s.jsx)("span",{className:"font-medium ".concat(e.points>0?"text-green-600":"text-red-600"),children:e.points>0?"+".concat(e.points):e.points})]},e.playerId)})})]},e.id))})]})}var h=r(17);function p(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(!1),{gameData:i,isLoading:m,addRound:p,resetGame:g,endGame:y}=(0,h.v)(),[b,f]=(0,a.useState)({}),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)("scores");(0,a.useEffect)(()=>{r(!0),m||i||e.push("/")},[m,i,e]);let S=(e,t)=>{f({...b,[e]:t})};return t&&!m&&i?(0,s.jsx)("main",{className:"flex min-h-screen flex-col p-4 md:p-8",children:(0,s.jsxs)(o.A,{className:"bg-gradient-to-br from-white to-gray-50 shadow-lg",children:[(0,s.jsx)(l.A,{title:"كاشفني / داقشني",subtitle:"الجولة ".concat(i.rounds.length+1)}),(0,s.jsxs)("div",{className:"flex border-b border-gray-200 mb-4",children:[(0,s.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("scores"===N?"border-b-2 border-primary text-primary font-bold":"text-gray-500"),onClick:()=>w("scores"),children:"النقاط"}),(0,s.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("history"===N?"border-b-2 border-primary text-primary font-bold":"text-gray-500"),onClick:()=>w("history"),children:"السجل"})]}),"scores"===N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(d,{players:i.players}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"إضافة نقاط الجولة:"}),(0,s.jsx)("div",{className:"space-y-3 bg-white p-3 rounded-md shadow-sm",children:i.players.map((e,t)=>(0,s.jsx)(u,{playerName:e.name,value:b[t]||"",onChange:e=>S(t,e),index:t},t))}),v&&(0,s.jsx)("div",{className:"text-red-500 text-sm mt-2",children:v}),(0,s.jsx)(c.A,{onClick:()=>{if(!i)return;let e=[],t=!1;if(i.players.forEach((r,s)=>{let a=b[s]?parseInt(b[s]):0;0!==a&&(t=!0),e.push({playerId:s,points:a})}),!t){j("الرجاء إدخال نقاط لاعب واحد على الأقل");return}p(e),f({}),j("")},variant:"primary",fullWidth:!0,className:"mt-4",children:"إضافة النقاط"})]})]}),"history"===N&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(x,{gameData:i})}),(0,s.jsxs)("div",{className:"pt-6 flex space-x-3 space-x-reverse",children:[(0,s.jsx)(c.A,{onClick:()=>{confirm("هل أنت متأكد من إعادة ضبط اللعبة؟ سيتم حذف جميع النقاط.")&&(g(),f({}))},variant:"secondary",className:"flex-1",children:"إعادة ضبط"}),(0,s.jsx)(c.A,{onClick:()=>{confirm("هل أنت متأكد من إنهاء اللعبة؟ سيتم العودة إلى الصفحة الرئيسية.")&&(y(),e.push("/"))},variant:"danger",className:"flex-1",children:"إنهاء اللعبة"})]})]})}):null}},6911:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155),a=r(8173),n=r.n(a);function l(e){let{children:t,href:r,variant:a="primary",size:l="default",fullWidth:o=!1,className:c,...i}=e,d="".concat("primary"===a?"button-primary":"secondary"===a?"button-secondary":"destructive"===a||"danger"===a?"bg-red-500 text-white":"outline"===a?"border border-gray-300 bg-transparent":"bg-transparent"," ").concat("sm"===l?"text-sm py-1 px-3":"lg"===l?"text-lg py-3 px-6":"py-2 px-4"," ").concat(o?"w-full":""," ").concat(c||"");return r?(0,s.jsx)(n(),{href:r,className:d,children:t}):(0,s.jsx)("button",{className:d,...i,children:t})}},973:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);function a(e){let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"w-full max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl ".concat(r),children:(0,s.jsx)("div",{className:"p-6",children:t})})}r(2115)},8715:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155);r(2115);var a=r(8173),n=r.n(a);function l(e){let{title:t,subtitle:r,showBackButton:a=!1,backUrl:l="/"}=e;return(0,s.jsxs)("div",{className:"text-center mb-6 relative",children:[a&&(0,s.jsx)(n(),{href:l,className:"absolute right-0 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m9 18 6-6-6-6"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-primary",children:t}),r&&(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:r})]})}},17:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});var s=r(2115);function a(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("gameData");if(e)try{t(JSON.parse(e))}catch(e){console.error("Error parsing game data:",e),t(null)}a(!1)},[]);let n=e=>{localStorage.setItem("gameData",JSON.stringify(e)),t(e)};return{gameData:e,isLoading:r,initializeGame:(e,r)=>{localStorage.removeItem("gameData");let s={initialAmount:e,players:r.map(t=>({name:t,score:e})),rounds:[],startDate:new Date().toISOString()};return localStorage.setItem("gameData",JSON.stringify(s)),t(s),s},addRound:t=>{if(!e)return null;let r={id:e.rounds.length+1,scores:t},s=e.players.map((e,r)=>{var s;let a=(null===(s=t.find(e=>e.playerId===r))||void 0===s?void 0:s.points)||0;return{...e,score:e.score+a}}),a={...e,players:s,rounds:[...e.rounds,r]};return n(a),a},resetGame:()=>{if(!e)return null;let t={...e,players:e.players.map(t=>({...t,score:e.initialAmount})),rounds:[]};return n(t),t},endGame:()=>{localStorage.removeItem("gameData"),t(null)}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,358],()=>t(4071)),_N_E=e.O()}]);